<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="820px" height="690px" viewBox="-0.5 -0.5 820 690" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-09-02T07:31:00.075Z&quot; agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62&quot; etag=&quot;18HGApCUaP9k0nN0g76h&quot; version=&quot;21.7.2&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;第 1 页&quot; id=&quot;IY5njssM-U8pexHW8cL3&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs><clipPath id="mx-clip-426-213-379-26-0"><rect x="426" y="213" width="379" height="26"/></clipPath><clipPath id="mx-clip-426-239-379-26-0"><rect x="426" y="239" width="379" height="26"/></clipPath><clipPath id="mx-clip-426-265-379-26-0"><rect x="426" y="265" width="379" height="26"/></clipPath><clipPath id="mx-clip-426-299-379-26-0"><rect x="426" y="299" width="379" height="26"/></clipPath><clipPath id="mx-clip-426-325-379-26-0"><rect x="426" y="325" width="379" height="26"/></clipPath><clipPath id="mx-clip-426-351-379-26-0"><rect x="426" y="351" width="379" height="26"/></clipPath><clipPath id="mx-clip-206-433-352-26-0"><rect x="206" y="433" width="352" height="26"/></clipPath><clipPath id="mx-clip-206-459-352-26-0"><rect x="206" y="459" width="352" height="26"/></clipPath><clipPath id="mx-clip-206-485-352-26-0"><rect x="206" y="485" width="352" height="26"/></clipPath><clipPath id="mx-clip-206-519-352-26-0"><rect x="206" y="519" width="352" height="26"/></clipPath><clipPath id="mx-clip-206-545-352-26-0"><rect x="206" y="545" width="352" height="26"/></clipPath><clipPath id="mx-clip-6-663-322-26-0"><rect x="6" y="663" width="322" height="26"/></clipPath><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffffff-1-ffffff-1-s-0"><stop offset="0%" style="stop-color: rgb(255, 255, 255); stop-opacity: 1;"/><stop offset="100%" style="stop-color: rgb(255, 255, 255); stop-opacity: 1;"/></linearGradient><clipPath id="mx-clip-441-33-372-26-0"><rect x="441" y="33" width="372" height="26"/></clipPath><clipPath id="mx-clip-441-67-372-26-0"><rect x="441" y="67" width="372" height="26"/></clipPath><clipPath id="mx-clip-441-93-372-26-0"><rect x="441" y="93" width="372" height="26"/></clipPath></defs><g><path d="M 615.21 129 L 615.21 138.5 Q 615.2 148 615.29 158 L 615.48 179.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 615.22 114 L 619.63 121.5 L 615.21 129 L 610.8 121.5 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 608.88 167.94 L 615.49 180.88 L 621.88 167.83" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 406.01 247 L 392 247 Q 382 247 382 257 L 382 399.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 421.01 247 L 413.51 251.41 L 406.01 247 L 413.51 242.59 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 375.5 387.88 L 382 400.88 L 388.5 387.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 186.01 441 L 176.51 441 Q 167 441 167 451 L 167 629.76" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 201.01 441 L 193.51 445.41 L 186.01 441 L 193.51 436.59 Z" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 160.5 617.88 L 167 630.88 L 173.5 617.88" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-end; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 441px; margin-left: 204px;"><div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">1</div></div></div></foreignObject><text x="204" y="441" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">1</text></switch></g><path d="M 422 208 L 422 182 L 809 182 L 809 208" fill="#ffffff" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 422 208 L 422 372 L 809 372 L 809 208" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 422 208 L 809 208" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="615" y="199.5">RegionManager</text></g><rect x="422" y="208" width="387" height="26" fill="#ffcc99" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-213-379-26-0)" font-size="12px"><text x="427.5" y="225.5">+ regions: std::unordered_map&lt;RegionID, std::shared_ptr&lt;Region&gt;&gt;;</text></g><rect x="422" y="234" width="387" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-239-379-26-0)" font-size="12px"><text x="427.5" y="251.5">+ region_range_index: RegionsRangeIndex</text></g><rect x="422" y="260" width="387" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-265-379-26-0)" font-size="12px"><text x="427.5" y="277.5">+ region_task_ctrl: RegionTaskCtrl</text></g><path d="M 422 290 L 809 290" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="422" y="294" width="387" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-299-379-26-0)" font-size="12px"><text x="427.5" y="311.5">+ RegionReadLock genRegionReadLock() const</text></g><rect x="422" y="320" width="387" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-325-379-26-0)" font-size="12px"><text x="427.5" y="337.5">+ RegionWriteLock genRegionWriteLock()</text></g><rect x="422" y="346" width="387" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-426-351-379-26-0)" font-size="12px"><text x="427.5" y="363.5">+ RegionTaskLock genRegionTaskLock(RegionID region_id) const;</text></g><path d="M 202 428 L 202 402 L 562 402 L 562 428" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 202 428 L 202 566 L 562 566 L 562 428" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 202 428 L 562 428" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="381.5" y="419.5">RegionsRangeIndex</text></g><rect x="202" y="428" width="360" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-206-433-352-26-0)" font-size="12px"><text x="207.5" y="445.5">+ root: std: map&lt;TiKVRangeKey, IndexNode&gt;</text></g><rect x="202" y="454" width="360" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-206-459-352-26-0)" font-size="12px"><text x="207.5" y="471.5">+ min_it: RootMap::const_iterator</text></g><rect x="202" y="480" width="360" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-206-485-352-26-0)" font-size="12px"><text x="207.5" y="497.5">+ max_it: RootMap::const_iterator</text></g><path d="M 202 510 L 562 510" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="202" y="514" width="360" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-206-519-352-26-0)" font-size="12px"><text x="207.5" y="531.5">+ void add(const RegionPtr &amp; new_region)</text></g><rect x="202" y="540" width="360" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-206-545-352-26-0)" font-size="12px"><text x="207.5" y="557.5">+ void remove(const RegionRange &amp; range, RegionID region_id)</text></g><path d="M 2 658 L 2 632 L 332 632 L 332 658" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 2 658 L 2 684 L 332 684 L 332 658" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 2 658 L 332 658" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="166.5" y="649.5">IndexNode</text></g><rect x="2" y="658" width="330" height="26" fill="#ffb366" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-6-663-322-26-0)" font-size="12px"><text x="7.5" y="675.5">+ region_map: std::unordered_map&lt;RegionID, RegionPtr&gt;</text></g><path d="M 437 28 L 437 2 L 817 2 L 817 28" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 437 28 L 437 114 L 817 114 L 817 28" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 437 28 L 817 28" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" font-weight="bold" text-anchor="middle" font-size="12px"><text x="626.5" y="19.5">SharedMutexLockWrap</text></g><rect x="437" y="28" width="380" height="26" fill="url(#mx-gradient-ffffff-1-ffffff-1-s-0)" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-441-33-372-26-0)" font-size="12px"><text x="442.5" y="45.5">+ shared_mutex: std::shared_mutex</text></g><path d="M 437 58 L 817 58" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="437" y="62" width="380" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-441-67-372-26-0)" font-size="12px"><text x="442.5" y="79.5">+ std::shared_lock&lt;std::shared_mutex&gt; genReadLockGuard() const</text></g><rect x="437" y="88" width="380" height="26" fill="none" stroke="none" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" clip-path="url(#mx-clip-441-93-372-26-0)" font-size="12px"><text x="442.5" y="105.5">+ std::unique_lock&lt;std::shared_mutex&gt; genWriteLockGuard() const</text></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>